# Инструкция по установке браузерного агента в открытом контуре

## Установка RUM агента возможна в двух случаях:
### SSR - Server-Side Rendering
Инструментация браузерного агента происходит через APM агент. В этом случае мы (команда GMonit) указывает на стороне коллектора - для каких приложений включить браузерный мониторинг.

### SPA - Single-Page Application

В случае с SPA приложениями настройка происходит при помощи [сниппета](https://github.com/HyperSoftLab/docs/tree/master/agent_installation_guide/RUM/snippet_template.html).
Его можно использовать для множества приложений. 

Для настройки сниппета необходимо выполнить 3 шага:
- В трёх местах кода файла **snippet_template** заменить `collector.%%%.gmonit.ru` на актуальный адрес коллектора.
- Заменить **applicationID:** `"My applicaton"` на свое название браузерного приложения, например **applicationID:** `"Prod_app”`, оно будет использоваться для идентификации приложения в системе, на разводящей странице браузерного мониторинга
- Скопируйте приведенный в сниппете фрагмент кода со скриптом и вставьте его как можно ближе к началу HEAD, но после любых МЕТА-тегов, чувствительных к положению (совместимых с X-UA и кодировкой).

# Установка RUM в закрытом контуре

- Перейдите по [ссылке](https://github.com/HyperSoftLab/docs/tree/master/agent_installation_guide/RUM/nr-spa-1.262.0.min.js) и cкачайте JavaScript-агента `nr-spa-1.262.0.min.js`.
- Разместите этот файл в соответствующем каталоге вашего CDN
- Скачайте сниппет [по ссылке](https://github.com/HyperSoftLab/docs/tree/master/agent_installation_guide/RUM/snippet_template.html)
- В скачанном файле замените адрес `https://js-agent.newrelic.com/` на путь к вашему каталогу CDN, где размещен файл `nr-spa-1.262.0.min.js`

- Для настройки сниппета необходимо выполнить 3 шага:
   - В трёх местах кода файла **snippet_template** заменить `collector.%%%.gmonit.ru` на актуальный адрес коллектора.
   - Заменить **applicationID:** `"My applicaton"` на свое название браузерного приложения, например **applicationID:** `"Prod_app”`, оно будет использоваться для идентификации приложения в системе, на разводящей странице браузерного мониторинга
   - Скопируйте приведенный в сниппете фрагмент кода со скриптом и вставьте его как можно ближе к началу HEAD, но после любых МЕТА-тегов, чувствительных к положению (совместимых с X-UA и кодировкой).


- Проверьте работу скриптов, подключаемых с CDN:
   - Откройте инструментированную страницу в браузере.
   - Перейдите в **DevTools (инструменты разработчика)** → вкладка **Network**.
   - В поле поиска введите `"newrelic"`.
   - Если в списке запросов вы видите файл `<ваш_CDN>/nr-spa-1.262.0.min.js`, это подтверждает успешную работу браузерного агента.