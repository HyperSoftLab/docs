# Инструкция по установке браузерного агента в открытом контуре

## Установка RUM агента возможна в двух случаях:
### SSR - Server-Side Rendering
Инструментация браузерного агента происходит через APM агент. В этом случае мы (команда GMonit) указывает на стороне коллектора - для каких приложений включить браузерный мониторинг.

### SPA - Single-Page Application

В случае с SPA приложениями настройка происходит при помощи [сниппета](https://github.com/HyperSoftLab/docs/tree/master/agent_installation_guide/RUM/snippet_template.html).
Его можно использовать для множества приложений. 

Для настройки сниппета необходимо выполнить 3 шага:
- В трёх местах кода файла **snippet_template** заменить `collector.%%%.gmonit.ru` на актуальный адрес коллектора.
- Заменить **applicationID:** `"My applicaton"` на свое название браузерного приложения, например **applicationID:** `"Prod_app”`, оно будет использоваться для идентификации приложения в системе, на разводящей странице браузерного мониторинга
- Скопируйте приведенный в сниппете фрагмент кода со скриптом и вставьте его как можно ближе к началу HEAD, но после любых МЕТА-тегов, чувствительных к положению (совместимых с X-UA и кодировкой).

# Установка RUM в закрытом контуре

- Скачайте скрипт [по ссылке](https://github.com/HyperSoftLab/docs/tree/master/agent_installation_guide/RUM/nr-spa-1.262.0.min.js)
- Разместите скрипт в соответствующем каталоге вашего CDN

- Скачайте сниппет [по ссылке](https://github.com/HyperSoftLab/docs/tree/master/agent_installation_guide/RUM/snippet_template.html)
- В сниппете замените адрес "https://js-agent.newrelic.com/" на путь к папке со скриптами в вашем CDN
- В трёх местах кода файла **snippet_template** заменить `collector.%%%.gmonit.ru` на актуальный адрес коллектора.
- Заменить **applicationID:** `"My applicaton"` на свое название браузерного приложения, например **applicationID:** `"Prod_app”`, оно будет использоваться для идентификации приложения в системе, на разводящей странице браузерного мониторинга
- Скопируйте приведенный в сниппете фрагмент кода со скриптом и вставьте его как можно ближе к началу HEAD, но после любых МЕТА-тегов, чувствительных к положению (совместимых с X-UA и кодировкой).


- Проверьте работу скриптов, подключаемых с CDN. Для этого на инструментированной странице откройте DevTools (инструменты разработчика) в браузере, перейдите во вкладку Network, и в окне поиска введите "newrelic". Если отобразится файл “https://js-agent.newrelic.com/nr-spa-1.262.0.min.js” — браузерный агент успешно функционирует