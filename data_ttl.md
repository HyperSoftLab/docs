# Хранение данных
## Настройка глубины хранения данных

Для настройки глубины хранения данных необходимо передать коллектору переменные окружения с соответствующими числовыми значениями в днях (через compose-файл или напрямую в docker-контейнер):
* `METRIC_DATA_TTL_DAY` (30) - хранение основных метрик, на основании которых строятся большинство графиков;
* `ANALYTIC_EVENT_DATA_TTL_DAY` (30) - хранение данных для построения вспомогательных графиков, например графики перцентилей и гистограмм;
* `ERROR_DATA_TTL_DAY` (30) - хранение детальной информации по ошибкам возникающим в приложении;
* `AGENTS_TTL_DAY` (30) - хранение метаданных по установленному агенту;
* `SPAN_EVENT_DATA_TTL_DAY` (8) - хранение информации по распределенным трейсам транзакций;
* `TRANSACTION_SAMPLE_DATA_TTL_DAY` (8) -  хранение трейсов медленных транзакций;
* `INFRA_METRICS_EVENTS_TTL_DAY` (30) - хранение инфраструктурных метрик и событий.

> В параметрах выше, в скобках приведены значения по умолчанию.

!> При уменьшении TTL старые данные удаляются асинхронно, в течении нескольких часов.

__Например (compose.yaml):__

```yaml
collector:
  image: gmonit/collector:master
  # ...
  environment:
    #...
    METRIC_DATA_TTL_DAY: 30
    ANALYTIC_EVENT_DATA_TTL_DAY: 30
    ERROR_DATA_TTL_DAY: 30
    AGENTS_TTL_DAY: 30
    SPAN_EVENT_DATA_TTL_DAY: 8
    TRANSACTION_SAMPLE_DATA_TTL_DAY: 8
    INFRA_METRICS_EVENTS_TTL_DAY: 30
    # ...
```
